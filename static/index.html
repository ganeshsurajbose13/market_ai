<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Market AI Search</title>
<style>
body { font-family: Arial; margin: 30px; }
input, button { padding: 8px; font-size: 16px; }
table { border-collapse: collapse; margin-top: 20px; }
th, td { border: 1px solid #333; padding: 8px; }
</style>
</head>
<body>
<h1>üìà Market AI Search</h1>
<input type="text" id="symbol" placeholder="Enter stock symbol like RELIANCE.NS">
<button onclick="analyze()">Analyze</button>

<div id="result"></div>

<script>
async function analyze() {
    const symbol = document.getElementById('symbol').value;
    if (!symbol) return alert("Enter a stock symbol!");

    const res = await fetch(`/analyze?symbol=${symbol}`);
    const data = await res.json();

    if (data.error) {
        document.getElementById('result').innerHTML = "‚ùå " + data.error;
        return;
    }

    let html = `<h2>${symbol} ‚Äî ${data.signal} (${data.probability_%}%)</h2>`;
    html += "<table><tr><th>Timeframe</th><th>Price</th><th>VWAP</th><th>EMA5</th><th>EMA10</th><th>EMA20</th></tr>";

    for (let tf in data.analysis) {
        const d = data.analysis[tf];
        html += `<tr><td>${tf}</td><td>${d.Price}</td><td>${d.VWAP}</td><td>${d.EMA_5}</td><td>${d.EMA_10}</td><td>${d.EMA_20}</td></tr>`;
    }

    html += "</table>";
    document.getElementById('result').innerHTML = html;
}
</script>
</body>
</html>
